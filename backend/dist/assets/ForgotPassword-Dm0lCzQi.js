import{r as i,y as x,a as v,j as e}from"./index-BLoMeHUS.js";import{c as r}from"./login_signup.styles-Bfkc2Wur.js";import{a as j}from"./index-D8rVyQy1.js";const y=()=>{const[l,c]=i.useState(null),[h,t]=i.useState(!1),[o,n]=i.useState(!1),[p,d]=i.useState("");return{forgotPass:async u=>{var g,m,a,k,b,w;if(!u)return x.error("Please enter your email address");if(t(!1),!navigator.onLine)return x.error("No internet connection! Please check your network");n(!0),c(null);try{const s=await j.post("https://workoutx-e9dl.onrender.com/api/user/forgot-password/",{email:u});s.status===200&&(d(((g=s.data)==null?void 0:g.message)||"Check your email for password reset instructions"),t(!0),x.success(((m=s==null?void 0:s.data)==null?void 0:m.message)||"Check your email for password reset instructions"))}catch(s){x.success(((k=(a=s.response)==null?void 0:a.data)==null?void 0:k.message)||"Failed to send password reset instructions"),c(((w=(b=s.response)==null?void 0:b.data)==null?void 0:w.message)||"Failed to send link")}finally{n(!1)}},error:l,isLoading:o,sentMail:h,setSentMail:t,success:p,setSuccess:d}},L=()=>{const[l,c]=i.useState(""),{forgotPass:h,error:t,isLoading:o,sentMail:n,setSentMail:p,success:d,setSuccess:f}=y(),u=v(),g=async a=>{a.preventDefault(),await h(l)},m=()=>{p(!1),u("/login"),f("")};return e.jsxs("div",{className:r.page,children:[n&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-lg bg-black/80 z-10",children:e.jsxs("div",{className:"sm:w-1/2 w-3/4 bg-white dark:bg-darkSecondary p-6 rounded-lg shadow-lg transition-colors duration-200",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-900 dark:text-darkTextPrimary",children:"Please check your email inbox/spam !"}),e.jsx("p",{className:"text-lg my-5 font-semibold dark:text-darkTextSecondary transition-colors duration-200",children:d}),e.jsx("button",{onClick:m,className:`
                                px-5 bg-green-600 hover:bg-green-500 active:bg-green-600 cursor-pointer text-white p-2 rounded dark:text-ButtonText dark:bg-darkAddButton dark:hover:bg-darkAddButtonHover dark:active:bg-darkAddButton transition-colors duration-200`,children:"OK"})]})}),!n&&e.jsxs("form",{onSubmit:g,className:r.form,children:[e.jsx("h2",{className:r.title,children:"Forgot Password"}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"relative min-w-sm",children:[e.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:a=>c(a.target.value),autoComplete:"email",className:r.email}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:r.emailIcon,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})})]})}),e.jsx("button",{disabled:o,className:`w-full ${o?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-500 active:bg-green-600"} text-white p-2 rounded transition-colors duration-200`,children:o?"Sending reset link...":"Send reset link"}),t&&e.jsx("p",{className:r.errorMessage,children:t})]})]})};export{L as default};
