import{r as b,j as r,y as k,l as T,u as I,a as K}from"./index-BLoMeHUS.js";import{a as D}from"./index-D8rVyQy1.js";import{u as $}from"./useWorkoutsContext-CIacAkhS.js";import{s as F}from"./toastHelper-B3O9yUP5.js";const L=43200,U=1440,q=Symbol.for("constructDateFrom");function H(e,a){return typeof e=="function"?e(a):e&&typeof e=="object"&&q in e?e[q](a):e instanceof Date?new e.constructor(a):new Date(a)}function j(e,a){return H(e,e)}let Q={};function Z(){return Q}function J(e){const a=j(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function _(e,...a){const t=H.bind(null,e||a.find(o=>typeof o=="object"));return a.map(t)}function R(e,a){const t=+j(e)-+j(a);return t<0?-1:t>0?1:t}function G(e){return H(e,Date.now())}function ee(e,a,t){const[o,n]=_(t==null?void 0:t.in,e,a),i=o.getFullYear()-n.getFullYear(),d=o.getMonth()-n.getMonth();return i*12+d}function te(e){return a=>{const o=(e?Math[e]:Math.trunc)(a);return o===0?0:o}}function re(e,a){return+j(e)-+j(a)}function ae(e,a){const t=j(e);return t.setHours(23,59,59,999),t}function ne(e,a){const t=j(e),o=t.getMonth();return t.setFullYear(t.getFullYear(),o+1,0),t.setHours(23,59,59,999),t}function oe(e,a){const t=j(e);return+ae(t)==+ne(t)}function se(e,a,t){const[o,n,i]=_(t==null?void 0:t.in,e,e,a),d=R(n,i),s=Math.abs(ee(n,i));if(s<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-d*s);let l=R(n,i)===-d;oe(o)&&s===1&&R(o,i)===1&&(l=!1);const u=d*(s-+l);return u===0?0:u}function de(e,a,t){const o=re(e,a)/1e3;return te(t==null?void 0:t.roundingMethod)(o)}const ie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},le=(e,a,t)=>{let o;const n=ie[e];return typeof n=="string"?o=n:a===1?o=n.one:o=n.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+o:o+" ago":o};function O(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const ue={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},me={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},he={date:O({formats:ue,defaultWidth:"full"}),time:O({formats:ce,defaultWidth:"full"}),dateTime:O({formats:me,defaultWidth:"full"})},ge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fe=(e,a,t,o)=>ge[e];function M(e){return(a,t)=>{const o=t!=null&&t.context?String(t.context):"standalone";let n;if(o==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,s=t!=null&&t.width?String(t.width):d;n=e.formattingValues[s]||e.formattingValues[d]}else{const d=e.defaultWidth,s=t!=null&&t.width?String(t.width):e.defaultWidth;n=e.values[s]||e.values[d]}const i=e.argumentCallback?e.argumentCallback(a):a;return n[i]}}const be={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ke={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},we={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ve=(e,a)=>{const t=Number(e),o=t%100;if(o>20||o<10)switch(o%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},je={ordinalNumber:ve,era:M({values:be,defaultWidth:"wide"}),quarter:M({values:xe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:M({values:ke,defaultWidth:"wide"}),day:M({values:pe,defaultWidth:"wide"}),dayPeriod:M({values:we,defaultWidth:"wide",formattingValues:ye,defaultFormattingWidth:"wide"})};function P(e){return(a,t={})=>{const o=t.width,n=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],i=a.match(n);if(!i)return null;const d=i[0],s=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?Se(s,f=>f.test(d)):De(s,f=>f.test(d));let u;u=e.valueCallback?e.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const m=a.slice(d.length);return{value:u,rest:m}}}function De(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}function Se(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}function Ne(e){return(a,t={})=>{const o=a.match(e.matchPattern);if(!o)return null;const n=o[0],i=a.match(e.parsePattern);if(!i)return null;let d=e.valueCallback?e.valueCallback(i[0]):i[0];d=t.valueCallback?t.valueCallback(d):d;const s=a.slice(n.length);return{value:d,rest:s}}}const Me=/^(\d+)(th|st|nd|rd)?/i,Pe=/\d+/i,Be={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Te={any:[/^b/i,/^(a|c)/i]},Ce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},We={any:[/1/i,/2/i,/3/i,/4/i]},Ae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Le={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Re={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Fe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ee={ordinalNumber:Ne({matchPattern:Me,parsePattern:Pe,valueCallback:e=>parseInt(e,10)}),era:P({matchPatterns:Be,defaultMatchWidth:"wide",parsePatterns:Te,defaultParseWidth:"any"}),quarter:P({matchPatterns:Ce,defaultMatchWidth:"wide",parsePatterns:We,defaultParseWidth:"any",valueCallback:e=>e+1}),month:P({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:Le,defaultParseWidth:"any"}),day:P({matchPatterns:Re,defaultMatchWidth:"wide",parsePatterns:Fe,defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:Ie,defaultMatchWidth:"any",parsePatterns:$e,defaultParseWidth:"any"})},Oe={code:"en-US",formatDistance:le,formatLong:he,formatRelative:fe,localize:je,match:Ee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function He(e,a,t){const o=Z(),n=(t==null?void 0:t.locale)??o.locale??Oe,i=2520,d=R(e,a);if(isNaN(d))throw new RangeError("Invalid time value");const s=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:d}),[l,u]=_(t==null?void 0:t.in,...d>0?[a,e]:[e,a]),m=de(u,l),f=(J(u)-J(l))/1e3,c=Math.round((m-f)/60);let h;if(c<2)return t!=null&&t.includeSeconds?m<5?n.formatDistance("lessThanXSeconds",5,s):m<10?n.formatDistance("lessThanXSeconds",10,s):m<20?n.formatDistance("lessThanXSeconds",20,s):m<40?n.formatDistance("halfAMinute",0,s):m<60?n.formatDistance("lessThanXMinutes",1,s):n.formatDistance("xMinutes",1,s):c===0?n.formatDistance("lessThanXMinutes",1,s):n.formatDistance("xMinutes",c,s);if(c<45)return n.formatDistance("xMinutes",c,s);if(c<90)return n.formatDistance("aboutXHours",1,s);if(c<U){const g=Math.round(c/60);return n.formatDistance("aboutXHours",g,s)}else{if(c<i)return n.formatDistance("xDays",1,s);if(c<L){const g=Math.round(c/U);return n.formatDistance("xDays",g,s)}else if(c<L*2)return h=Math.round(c/L),n.formatDistance("aboutXMonths",h,s)}if(h=se(u,l),h<12){const g=Math.round(c/L);return n.formatDistance("xMonths",g,s)}else{const g=h%12,p=Math.trunc(h/12);return g<3?n.formatDistance("aboutXYears",p,s):g<9?n.formatDistance("overXYears",p,s):n.formatDistance("almostXYears",p+1,s)}}function V(e,a){return He(e,G(e),a)}const _e=({workoutId:e,user:a,dispatch:t})=>{const[o,n]=b.useState(!1),[i,d]=b.useState(!1),s=()=>n(!0),l=()=>n(!1),u=async()=>{var m,f;if(!a){k.error("You must be logged in to delete workouts.");return}if(!i){d(!0);try{console.log("Deleting workout with ID:",e);const c=await D.delete(`https://workoutx-e9dl.onrender.com/api/workouts/${e}`,{headers:{Authorization:`Bearer ${a.token}`}});t({type:"DELETE_WORKOUT",payload:e}),k.success(c.data.message,{transition:T})}catch(c){const h=((f=(m=c.response)==null?void 0:m.data)==null?void 0:f.message)||"Failed to delete workout!";throw k.error(h),new Error(h)}n(!1),d(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx("svg",{onClick:s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`delete-workout-btn text-white rounded-full p-2 cursor-pointer bg-red-500 hover:bg-red-600 
            dark:text-darkButtonText dark:bg-darkDeleteButton dark:hover:bg-darkDeleteButtonHover 
            transition-colors duration-200 size-10`,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),o&&r.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-lg bg-black/80 z-10",children:r.jsxs("div",{className:"bg-white dark:bg-darkSecondary p-6 rounded-lg shadow-lg transition-colors duration-200",children:[r.jsx("p",{className:"text-lg font-semibold dark:text-darkTextResult transition-colors duration-200",children:"Are you sure you want to delete this workout?"}),r.jsxs("div",{className:"flex justify-center md:justify-end space-x-4 mt-4",children:[r.jsx("button",{onClick:l,className:"px-4 py-2 dark:text-darkCancelButtonText bg-gray-400 hover:bg-gray-500 dark:bg-darkCancelButton dark:hover:bg-darkCancelButtonHover rounded-lg cursor-pointer transition-colors duration-200",children:"Cancel"}),r.jsx("button",{onClick:u,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 dark:bg-darkDeleteButton dark:hover:bg-darkDeleteButtonHover transition-colors duration-200 cursor-pointer",children:"Confirm"})]})]})})]})},ze=({workout:e})=>{const{dispatch:a}=$(),{user:t}=I(),o=async i=>{const d=i.target.value;if(!t){k.error("You must be logged in!");return}try{if(d==="in progress"){const m=(await D.get("https://workoutx-e9dl.onrender.com/api/workouts",{headers:{Authorization:`Bearer ${t.token}`}})).data.workouts.find(f=>f.status==="in progress");m&&m._id!==e._id&&(await D.patch(`https://workoutx-e9dl.onrender.com/api/workouts/${m._id}`,{status:"pending"},{headers:{Authorization:`Bearer ${t.token}`}}),a({type:"UPDATE_WORKOUT",payload:{...m,status:"pending"}}))}const s=await D.patch(`https://workoutx-e9dl.onrender.com/api/workouts/${e._id}`,{status:d},{headers:{Authorization:`Bearer ${t.token}`}});a({type:"UPDATE_WORKOUT",payload:s.data.updateWorkout}),F(`Workout status updated to ${d}`,"success")}catch{k.error("Failed to update status!")}},n=`${e.status==="completed"||e.status==="in progress"?"bg-white dark:text-darkTextResult dark:bg-darkInputBackground":""}`;return r.jsxs("div",{className:"flex space-x-2 translate-y-1",children:[r.jsx("div",{children:r.jsx("p",{children:r.jsx("strong",{className:`transition-colors duration-200 ${e.status==="completed"?"text-neutral-800 dark:text-darkDisabledText cursor-not-allowed line-through":"dark:text-darkTextSecondary"}`,children:"Status :"})})}),r.jsx("div",{children:r.jsxs("select",{id:"status-filter",className:`cursor-pointer flex text-center border border-gray-400 dark:border-darkBorder p-1 rounded-lg transition-colors duration-200 
                        ${e.status==="completed"?"bg-green-400 text-neutral-700 dark:bg-darkAddButtonHover dark:text-darkInputText":e.status==="in progress"?"bg-blue-400 text-neutral-800 dark:bg-darkTestButton dark:text-darkInputBackground ":"bg-white text-neutral-800 dark:bg-darkInputBackground dark:text-darkTextResult"}`,value:e.status,onChange:o,children:[r.jsx("option",{value:"",disabled:!0,className:`${e.status==="completed"||e.status==="in progress"?"bg-white  dark:bg-darkInputBackground":""}`,children:"Select Status"}),r.jsx("option",{value:"pending",className:n,children:"Pending"}),r.jsx("option",{value:"in progress",className:n,children:"On Progress"}),r.jsx("option",{value:"completed",className:n,children:"Completed"})]})})]})},B="dark:text-darkAddButtonHover ml-1 py-2 animate-bounce translate-y-1",Xe="border border-green-500 dark:border-darkAddButtonHover w-1 h-3 bg-green-500 dark:bg-darkAddButtonHover rounded-full overflow-hidden",Ye="border border-green-500 dark:border-darkAddButtonHover w-1 h-2 bg-green-500 dark:bg-darkAddButtonHover rounded-full overflow-hidden",Ue="border border-green-500 dark:border-darkAddButtonHover w-1 h-2 bg-green-500 dark:bg-darkAddButtonHover rounded-full overflow-hidden",qe="border border-green-500 dark:border-darkAddButtonHover w-1 h-2 bg-green-500 dark:bg-darkAddButtonHover rounded-full overflow-hidden",Je="border border-green-500 dark:border-darkAddButtonHover w-1 h-3 bg-green-500 dark:bg-darkAddButtonHover rounded-full overflow-hidden",Ve=()=>r.jsxs("div",{className:"flex items-center justify-center ml-2",children:[r.jsx("span",{className:B,style:{animationDelay:"200ms"},children:r.jsx("div",{className:Xe})}),r.jsx("span",{className:B,style:{animationDelay:"400ms"},children:r.jsx("div",{className:Ye})}),r.jsx("span",{className:B,style:{animationDelay:"600ms"},children:r.jsx("div",{className:Ue})}),r.jsx("span",{className:B,style:{animationDelay:"800ms"},children:r.jsx("div",{className:qe})}),r.jsx("span",{className:B,style:{animationDelay:"1000ms"},children:r.jsx("div",{className:Je})})]}),Ke=({workout:e})=>{//!Declarations & properties of the Workout
const a=K(),{dispatch:t}=$(),[o,n]=b.useState(!1),[i,d]=b.useState(e.title),[s,l]=b.useState(e.load),[u,m]=b.useState(e.reps),[f,c]=b.useState(null),{user:h}=I(),g=e.status==="completed",p=e.status==="in progress",E=async()=>{var v,z,X;if(!h){k.error("You must be logged in to update workouts.");return}if(i.trim()==="")return k.error("Title cannot be empty!"),c("Title cannot be empty!");if(s<0||u<1){if(s<0)return k.error("Load cannot be negative!"),c("Load cannot be negative!");if(u<1)return k.error("Reps cannot be less than 1!"),c("Reps cannot be less than 1!")}try{const N=await D.patch(`https://workoutx-e9dl.onrender.com/api/workouts/${e._id}`,{title:i,load:Number(s),reps:Number(u)},{headers:{Authorization:`Bearer ${h.token}`}});t({type:"UPDATE_WORKOUT",payload:N.data.updateWorkout}),n(!1),c(null),k.success((v=N==null?void 0:N.data)==null?void 0:v.message)}catch(N){const Y=((X=(z=N.response)==null?void 0:z.data)==null?void 0:X.message)||"Failed to update workout!";throw k.error(Y),new Error(Y)}},w=v=>{l(v.target.value)},x=v=>{m(v.target.value)},C=v=>{d(v.target.value)},W=()=>{n(!0),F("Editing Enabled","info",{transition:T})},A=()=>{n(!1),d(e.title),l(e.load),m(e.reps),F("Editing canceled","info",{transition:T})},S=`border p-1 rounded-lg bg-blue-100  dark:border-darkBorder mr-2 dark:bg-darkInputBackground dark:text-darkInputText transition-colors duration-200 ${p?"border-gray-400":"border-gray-300"}`,y=`transition-colors duration-200 ${g?"text-neutral-800 dark:text-darkDisabledText cursor-not-allowed line-through":"dark:text-darkTextSecondary"}`;return r.jsx("div",{className:`workout-item flex items-start  max-w-screen rounded-lg font-Poppins md:ml-4 pb-5 pr-5 pl-5 pt-5 flex-col shadow-md mb-5 transition-colors duration-200 ${g?"bg-neutral-300 dark:bg-darkDisabledCard":p?"bg-blue-200 dark:bg-darkProgress ":"bg-white dark:bg-darkSecondary"}`,children:o?r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-center",children:f&&r.jsx("p",{className:"w-1/2 p-2 mr-3 mb-4 text-red-500 dark:text-errorText border bg-red-100 dark:bg-errorBackground rounded-lg mt-4 flex justify-center items-center transition-colors duration-200",children:f})}),r.jsxs("div",{className:"flex flex-wrap gap-2.5 justify-between",children:[r.jsx("input",{className:S,placeholder:"Workout Title",value:i,onChange:C}),r.jsx("input",{className:S,type:"number",min:"1",placeholder:"Load",value:s,onChange:w}),r.jsx("input",{className:S,type:"number",min:"1",placeholder:"Reps",value:u,onChange:x}),r.jsxs("p",{className:"dark:text-darkTextResult transition-colors duration-200",children:["Last updated: ",V(new Date(e.updatedAt),{addSuffix:!0})]}),r.jsxs("div",{className:"flex mr-3",children:[r.jsx("svg",{onClick:E,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"p-1 rounded-lg bg-green-500 text-white hover:bg-green-600 active:bg-green-500 mr-2 size-10 cursor-pointer dark:bg-darkSaveButton dark:hover:bg-darkSaveButtonHover dark:active:bg-darkSaveButton dark:text-darkButtonText transition-colors duration-200",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),r.jsx("svg",{onClick:A,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"p-1 rounded-full text-white mr-2 size-10 cursor-pointer bg-gray-400 hover:bg-gray-500 active:bg-gray-400 dark:bg-darkCancelButton dark:hover:bg-darkCancelButtonHover dark:active:bg-darkCancelButton dark:text-darkCancelButtonText transition-colors duration-200",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex",children:[r.jsx("h4",{className:` text-2xl font-extrabold transition-colors md:mb-0 mb-4 duration-200 ${g?"text-neutral-800 dark:text-darkDisabledText cursor-not-allowed line-through":" text-blue-600 hover:text-blue-500 dark:hover:text-darkTextPrimaryHover dark:text-darkTextPrimary  cursor-pointer "} `,onClick:()=>!g&&a("/test",{state:{workout:e}}),children:e.title}),p&&r.jsx(Ve,{}),g&&r.jsx("div",{className:"flex items-center justify-center -translate-y-1",children:r.jsx("span",{className:"text-blue-600 pt-2 pl-2 dark:text-darkAddButtonHover",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:r.jsx("path",{fillRule:"evenodd",d:"M8.603 3.799A4.49 4.49 0 0 1 12 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 0 1 3.498 1.307 4.491 4.491 0 0 1 1.307 3.497A4.49 4.49 0 0 1 21.75 12a4.49 4.49 0 0 1-1.549 3.397 4.491 4.491 0 0 1-1.307 3.497 4.491 4.491 0 0 1-3.497 1.307A4.49 4.49 0 0 1 12 21.75a4.49 4.49 0 0 1-3.397-1.549 4.49 4.49 0 0 1-3.498-1.306 4.491 4.491 0 0 1-1.307-3.498A4.49 4.49 0 0 1 2.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 0 1 1.307-3.497 4.49 4.49 0 0 1 3.497-1.307Zm7.007 6.387a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"})})})})]}),r.jsxs("div",{className:`lg:flex-row md:justify-between flex flex-col items-start w-full md:pr-5 md:items-start lg:items-center transition-colors duration-200 ${g?"text-neutral-800 dark:text-darkDisabledText cursor-not-allowed":"dark:text-darkTextResult"}`,children:[r.jsxs("p",{children:[r.jsx("strong",{className:y,children:"Load (kg): "}),r.jsx("span",{className:`${g?"line-through":""}`,children:e.load})]}),r.jsxs("p",{children:[r.jsx("strong",{className:y,children:"Reps: "}),r.jsx("span",{className:`${g?"line-through":""}`,children:e.reps})]}),r.jsxs("p",{children:[r.jsx("strong",{className:y,children:"Created: "}),r.jsx("span",{className:`${g?"line-through":""}`,children:V(new Date(e.createdAt),{addSuffix:!0})})]}),r.jsxs("div",{className:"flex md:gap-2 gap-2 mt-3 w-full md:w-auto justify-between",children:[r.jsxs("div",{children:[h.plan==="Premium"&&r.jsx(ze,{workout:e}),h.plan==="Basic"&&r.jsx("div",{onClick:()=>{a("/plans")},id:"status-feature",className:"bg-blue-200 rounded-lg p-1 sm:w-s lg:w-3xs w-s dark:bg-darkDisabledButton cursor-pointer",children:r.jsx("p",{className:"text-xs",children:"ðŸ”’ Upgrade to Premium to unlock the Workout Status feature"})})]}),r.jsxs("div",{className:"flex gap-2 ",children:[r.jsx("svg",{onClick:g?null:W,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:`edit-workout-btn rounded-lg p-2  transition-colors duration-200 size-10 ${g?"text-white bg-neutral-400 dark:bg-darkDisabledButton dark:text-darkDisabledText cursor-not-allowed":"text-white cursor-pointer bg-blue-600 hover:bg-blue-800 dark:bg-darkEditButton dark:hover:bg-darkEditButtonHover dark:text-darkButtonText "}`,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})}),r.jsx(_e,{workoutId:e._id,user:h,dispatch:t})]})]})]})]})})},Qe=({title:e,setTitle:a,emptyFields:t})=>{const[o,n]=b.useState(!1),i=["Push-ups","Squats","Deadlifts","Bench Press","Pull-ups","Lunges","Plank","Bicep Curls","Tricep Dips","Burpees","Mountain Climbers","Jump Rope","Russian Twists","Leg Raises","Sit-ups","Crunches","Dumbbell Shoulder Press","Lat Pulldown","Rowing Machine","Kettlebell Swings","Box Jumps","Calf Raises","Dips","Incline Bench Press","Hammer Curls","Wall Sit","Chest Fly","Face Pulls","Treadmill Running","Cycling","Yoga Poses","Pilates Movements","Battle Ropes","Farmer's Carry","Reverse Lunges","Step-ups"].sort(),d=l=>{const u=l.target.value;a(u),n(u.length>0)},s=l=>{a(l),n(!1)};return r.jsxs("div",{className:"relative w-full",children:[r.jsx("input",{type:"text",value:e,onChange:d,className:`w-full p-2 mb-4 placeholder:text-gray-500 dark:placeholder:text-darkTextPlaceholder border dark:border-darkBorder rounded-lg dark:bg-darkInputBackground transition-colors duration-200 ${t.includes("reps")?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-darkBorder"}`,placeholder:"Search workout..."}),o&&r.jsx("ul",{className:"absolute w-full bg-white border border-gray-300 dark:border-darkBorder rounded-lg shadow-md max-h-40 overflow-y-auto z-10 dark:bg-darkPrimary dark:text-darkTextResult transition-colors duration-150",children:i.filter(l=>l.toLowerCase().includes(e.toLowerCase())).map((l,u)=>r.jsx("li",{onClick:()=>s(l),className:"p-2 hover:bg-gray-200 cursor-pointer dark:hover:bg-darkTertiary transition-colors duration-150",children:l},u))})]})},Ze=()=>{const{dispatch:e}=$(),[a,t]=b.useState(""),[o,n]=b.useState(""),[i,d]=b.useState(""),[s,l]=b.useState(null),[u,m]=b.useState([]),[f,c]=b.useState(!1),{user:h}=I(),g=async w=>{var C,W,A,S;if(w.preventDefault(),!h){l("Please log in to add a workout"),k.error("Please log in to add a workout",{transition:T});return}let x=[];if(a.trim()||x.push("title"),(!o||o<0)&&x.push("load"),(!i||i<0)&&x.push("reps"),x.length>0){m(x),l("Please fill in all required fields "+x.join(" ")),k.error("All fields are required",{transition:T});return}if(!f){c(!0),l(null),m([]);try{const y=await D.post("https://workoutx-e9dl.onrender.com/api/workouts/",{title:a,load:Number(o),reps:Number(i)},{headers:{Authorization:`Bearer ${h.token}`}});e({type:"CREATE_WORKOUT",payload:y.data.newWorkout}),t(""),n(""),d(""),m([]),k.success(y.data.message,{position:"bottom-right"})}catch(y){l(((W=(C=y.response)==null?void 0:C.data)==null?void 0:W.message)||"Failed to create workout"),m(((S=(A=y.response)==null?void 0:A.data)==null?void 0:S.emptyFields)||[])}finally{c(!1)}}},p=w=>{w.preventDefault();let x=w.target.value;x<0||x===0&&!window.confirm("Are you sure you want to set Reps to 0?")||d(x)},E=w=>{w.preventDefault();let x=w.target.value;x<0||x===0&&!window.confirm("Are you sure you want to set Load to 0?")||n(x)};return r.jsx("div",{children:r.jsxs("form",{id:"workout-form",onSubmit:g,className:`max-w-lg mx-auto p-6 mb-4 md:mb-0 bg-white dark:bg-darkSecondary dark:text-darkInputText  shadow-md rounded-lg
transition-colors duration-200`,children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-darkTextPrimary mb-4 transition-colors duration-200",children:"Add a new workout"}),r.jsx(Qe,{emptyFields:u,title:a,setTitle:t}),r.jsx("input",{className:`w-full p-2 mb-4 placeholder:text-gray-500 dark:placeholder:text-darkTextPlaceholder border dark:border-darkBorder rounded-lg dark:bg-darkInputBackground transition-colors duration-200 ${u.includes("load")?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-darkBorder"}`,type:"number",onChange:E,value:o,placeholder:"Load (kg)"}),r.jsx("input",{className:`w-full p-2 mb-4 placeholder:text-gray-500 dark:placeholder:text-darkTextPlaceholder border dark:border-darkBorder rounded-lg dark:bg-darkInputBackground transition-colors duration-200 ${u.includes("reps")?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-darkBorder"}`,type:"number",onChange:p,value:i,placeholder:"Reps"}),r.jsx("button",{id:"add-workout-btn",className:`
                    w-full bg-green-600 hover:bg-green-500 active:bg-green-600 cursor-pointer text-white p-2 rounded dark:text-ButtonText dark:bg-darkAddButton dark:hover:bg-darkAddButtonHover dark:active:bg-darkAddButton transition-colors duration-200`,disabled:f,children:f?"Adding...":"Add Workout"}),s&&r.jsx("p",{className:"w-full p-2 mb-4 text-red-500 dark:text-errorText border bg-red-100 dark:bg-errorBackground rounded-lg mt-4 flex justify-center items-center transition-colors duration-200",children:s})]})})},at=()=>{const{workouts:e,dispatch:a}=$(),[t,o]=b.useState(null),[n,i]=b.useState(!0),[d,s]=b.useState(!0),{user:l}=I();return b.useEffect(()=>{console.log("rendered"),l&&(async()=>{var m,f,c;try{const h=await D.get("https://workoutx-e9dl.onrender.com/api/workouts",{headers:{Authorization:`Bearer ${l.token}`}});a({type:"SET_WORKOUTS",payload:h.data.workouts}),d&&(F(((m=h==null?void 0:h.data)==null?void 0:m.message)||`Welcome back, ${l.username}`,"info"),s(!1)),o(null)}catch(h){const g=((c=(f=h.response)==null?void 0:f.data)==null?void 0:c.message)||"Couldn't load workouts. Try refreshing the page!";k.error(g,{position:"bottom-right"}),o(g)}finally{i(!1)}})()},[]),r.jsxs("div",{className:"sm:grid-cols-[4fr_3fr] md:grid-cols-[4fr_2fr] grid grid-cols-1 text-center bg-gray-200 dark:bg-darkPrimary w-full min-h-[calc(100vh-5.5rem)] pt-5 gap-4 transition-colors duration-200",children:[r.jsx("div",{className:"px-6 sm:px-2 order-first sm:order-last",children:r.jsx(Ze,{})}),r.jsx("div",{id:"workout-list",className:"px-6 sm:px-2 flex flex-col",children:n?r.jsx("div",{className:"flex flex-grow justify-center items-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"mt-4 text-lg text-blue-600 ",children:"Loading workouts..."})]})}):t?r.jsx("div",{className:"flex flex-grow justify-center items-center",children:r.jsx("h1",{className:"w-6/7 p-2 mb-4 text-2xl text-red-500 dark:text-errorText border bg-red-100 dark:bg-errorBackground rounded-lg mt-4 flex justify-center items-center transition-colors duration-200",children:t})}):(e==null?void 0:e.length)===0?r.jsx("div",{className:"flex flex-grow justify-center items-center",children:r.jsx("p",{className:"text-2xl text-gray-500",children:"No workouts found. Add a new one!"})}):r.jsx(r.Fragment,{children:e.map(u=>r.jsx(Ke,{workout:u},u._id))})})]})};export{at as default};
