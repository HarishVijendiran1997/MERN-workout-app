import{r as a,y as j,c as N,a as P,j as e}from"./index-BLoMeHUS.js";import{c as t}from"./login_signup.styles-Bfkc2Wur.js";import{a as y}from"./index-D8rVyQy1.js";const S=()=>{const[w,c]=a.useState(null),[h,o]=a.useState(!1),[p,l]=a.useState(!1),[i,n]=a.useState("");return{resetPass:async(f,v,b)=>{var u,r,x,g;if(!navigator.onLine)return j.error("No internet connection! Please check your network.");l(!0),c(null),o(!1);try{const s=await y.patch("https://workoutx-e9dl.onrender.com/api/user/reset-password/",{newPassword:f,confirmPassword:v,token:b});s.status===200&&(n(((u=s.data)==null?void 0:u.message)||"Password reset successful."),o(!0),j.success(((r=s==null?void 0:s.data)==null?void 0:r.message)||"Password reset successful."))}catch(s){const m=((g=(x=s.response)==null?void 0:x.data)==null?void 0:g.message)||" to reset password.";c(m),j.error(m)}finally{l(!1)}},error:w,isLoading:p,resetOk:h,setResetOk:o,success:i,setSuccess:n}},B=()=>{const{token:w}=N(),[c,h]=a.useState(""),[o,p]=a.useState(""),{resetPass:l,error:i,isLoading:n,resetOk:k,setResetOk:f,success:v,setSuccess:b}=S(),u=P(),[r,x]=a.useState(!1),g=async d=>{d.preventDefault(),await l(c,o,w)},s=d=>{x(!r)},m=()=>{f(!1),u("/login"),b("")};return e.jsxs("div",{className:t.page,children:[k&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-lg bg-black/80 z-10",children:e.jsxs("div",{className:"sm:w-1/2 w-3/4 bg-white dark:bg-darkSecondary p-6 rounded-lg shadow-lg transition-colors duration-200",children:[e.jsx("h2",{className:"text-lg font-bold text-blue-900 dark:text-darkTextPrimary",children:"Reset Password"}),e.jsx("p",{className:"text-lg my-5 font-semibold dark:text-darkTextSecondary transition-colors duration-200",children:v}),e.jsx("button",{onClick:m,className:`
                                px-5 bg-green-600 hover:bg-green-500 active:bg-green-600 cursor-pointer text-white p-2 rounded dark:text-ButtonText dark:bg-darkAddButton dark:hover:bg-darkAddButtonHover dark:active:bg-darkAddButton transition-colors duration-200`,children:"OK"})]})}),!k&&e.jsxs("form",{onSubmit:g,className:t.form,children:[e.jsx("h2",{className:t.title,children:"Reset Password"}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r?"text":"password",placeholder:"New Password",value:c,onChange:d=>h(d.target.value),autoComplete:"off",className:t.password}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t.passwordIcon,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})]}),e.jsxs("div",{className:"relative min-w-sm",children:[e.jsx("input",{type:r?"text":"password",placeholder:"Confirm Password",value:o,onChange:d=>p(d.target.value),autoComplete:"off",className:t.password}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t.passwordIcon,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})]}),e.jsx("div",{className:"flex items-center space-x-2 mb-5 px-2",children:e.jsxs("label",{className:"flex items-center space-x-2 px-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"showPassword",checked:r,onChange:s,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-darkInputBackground dark:border-gray-600 dark:accent-darkEditButton"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-darkTextSecondary",children:"Show password"})]})})]}),e.jsx("button",{disabled:n,className:`w-full cursor-pointer ${n?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-500 active:bg-green-600"} text-white p-2 rounded transition-colors duration-200`,children:n?"Resetting password...":"Reset Password"}),i&&e.jsx("p",{className:t.errorMessage,children:i})]})]})};export{B as ResetPassword,B as default};
