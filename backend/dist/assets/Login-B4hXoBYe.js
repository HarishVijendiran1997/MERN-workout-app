import{r as l,u as C,y as E,a as I,j as e,L as T}from"./index-BLoMeHUS.js";import{a as B}from"./index-D8rVyQy1.js";import{s as M}from"./toastHelper-B3O9yUP5.js";import{c as a}from"./login_signup.styles-Bfkc2Wur.js";const O=()=>{const[i,c]=l.useState(null),[d,m]=l.useState(!1),{dispatch:o}=C();return{login:async(h,r)=>{var n,x;if(!navigator.onLine)return E.error("No internet connection! Please check your network");m(!0),c(null);try{const s=await B.post("https://workoutx-e9dl.onrender.com/api/user/login",{email:h,password:r});localStorage.setItem("user",JSON.stringify(s.data)),o({type:"LOGIN",payload:s.data}),setTimeout(()=>{var u;M(((u=s==null?void 0:s.data)==null?void 0:u.message)||"Login successful!","info")},2e3)}catch(s){c(((x=(n=s.response)==null?void 0:n.data)==null?void 0:x.message)||"Login failed")}finally{m(!1)}},error:i,isLoading:d}},H=()=>{const[i,c]=l.useState(""),[d,m]=l.useState(""),[o,p]=l.useState(!1),{login:h,isLoading:r,error:n}=O(),x=I(),s=async t=>{t.preventDefault(),await h(i,d)},u=t=>{p(!o)},w=t=>{const g=t.target.value;c(g)},v=t=>{const g=t.target.value;m(g)},y=a.page,j=a.form,f=a.title,k=a.email,N=a.emailIcon,S=a.password,L=a.passwordIcon,b=a.showPassword,P=a.errorMessage;return e.jsx("div",{className:y,children:e.jsxs("form",{onSubmit:s,className:j,disabled:r,children:[e.jsx("h2",{className:f,children:"Log in"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"relative min-w-sm",children:[e.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:w,autoComplete:"email",className:k}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:N,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})})]}),e.jsxs("div",{className:"relative min-w-sm ",children:[e.jsx("input",{type:o?"text":"password",placeholder:"Password",value:d,onChange:v,autoComplete:"current-password",className:S}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:L,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2 my-4 px-2",children:e.jsxs("label",{className:"flex items-center space-x-2 px-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"showPassword",checked:o,onChange:u,className:b}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-darkTextSecondary",children:"Show password"})]})}),e.jsx("div",{className:"flex items-center space-x-2 my-4 px-2",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-darkTextSecondary",children:e.jsx("p",{className:"hover:underline cursor-pointer hover:text-blue-500 dark:hover:text-darkTextResult",onClick:()=>{x("/forgot-password")},children:"Forgot Password?"})})})]}),e.jsx("button",{className:`w-full ${r?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-500 active:bg-green-600"} text-white p-2 rounded transition-colors duration-200 cursor-pointer`,children:r?"Logging in...":"Login"}),n&&e.jsx("p",{className:P,children:n}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-darkTextSecondary",children:["Don't have an account?"," ",e.jsx(T,{to:"/signup",className:"text-blue-600 hover:text-blue-500 dark:text-accent-darkEditButton dark:hover:text-darkEditButtonHover ",children:"Sign up now"})]})})]})})};export{H as default};
